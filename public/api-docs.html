<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API Documentation - Document Generation API</title>
  <meta name="description" content="API documentation for the Document Generation API">
  <meta name="theme-color" content="#2563eb">
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" href="/icons/favicon.light.svg" media="(prefers-color-scheme: light)">
  <link rel="icon" href="/icons/favicon.dark.svg" media="(prefers-color-scheme: dark)">
  <link rel="apple-touch-icon" href="/icons/icon-192x192.png">
  <link rel="stylesheet" href="/css/theme.css">
  <script src="/js/register-sw.js"></script>
  <script type="module" src="/js/theme.js"></script>
  <script type="module" src="/js/main.js"></script>
  <style>
    body {
      max-width: 1200px;
      margin: 0 auto;
      padding: var(--spacing-lg);
    }
    
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: var(--spacing-xl);
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
    }
    
    .logo img {
      height: 40px;
      width: auto;
    }
    
    .logo h1 {
      margin: 0;
      color: var(--primary-color);
    }
    
    .nav-links {
      display: flex;
      gap: var(--spacing-md);
    }
    
    .nav-link {
      padding: var(--spacing-sm) var(--spacing-md);
      color: var(--text-primary);
      text-decoration: none;
      border-radius: var(--border-radius-md);
      transition: background-color var(--transition-fast);
    }
    
    .nav-link:hover {
      background-color: var(--surface-variant);
    }
    
    .nav-link.primary {
      background-color: var(--primary-color);
      color: var(--text-on-primary);
    }
    
    .nav-link.primary:hover {
      background-color: var(--primary-dark);
    }
    
    .api-section {
      margin-bottom: var(--spacing-xxl);
    }
    
    .endpoint {
      margin-bottom: var(--spacing-xl);
      padding: var(--spacing-lg);
      background-color: var(--card-background);
      border-radius: var(--border-radius-lg);
      border: 1px solid var(--border-color);
    }
    
    .endpoint-header {
      display: flex;
      align-items: center;
      margin-bottom: var(--spacing-md);
    }
    
    .http-method {
      padding: var(--spacing-xs) var(--spacing-sm);
      border-radius: var(--border-radius-sm);
      font-weight: var(--font-weight-bold);
      font-family: monospace;
      margin-right: var(--spacing-md);
    }
    
    .method-post {
      background-color: #10B981;
      color: white;
    }
    
    .method-get {
      background-color: #3B82F6;
      color: white;
    }
    
    .method-put {
      background-color: #F59E0B;
      color: white;
    }
    
    .method-delete {
      background-color: #EF4444;
      color: white;
    }
    
    .endpoint-path {
      font-family: monospace;
      font-size: var(--font-size-lg);
      color: var(--text-primary);
    }
    
    .endpoint-description {
      margin-bottom: var(--spacing-md);
      color: var(--text-secondary);
    }
    
    .section-title {
      font-size: var(--font-size-lg);
      font-weight: var(--font-weight-semibold);
      margin-bottom: var(--spacing-sm);
      color: var(--text-primary);
    }
    
    .code-block {
      background-color: var(--surface-variant);
      padding: var(--spacing-md);
      border-radius: var(--border-radius-md);
      overflow-x: auto;
      margin-bottom: var(--spacing-md);
    }
    
    pre {
      margin: 0;
      font-family: monospace;
      color: var(--text-primary);
    }
    
    .parameter-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: var(--spacing-md);
    }
    
    .parameter-table th,
    .parameter-table td {
      padding: var(--spacing-sm) var(--spacing-md);
      text-align: left;
      border-bottom: 1px solid var(--border-color);
    }
    
    .parameter-table th {
      font-weight: var(--font-weight-semibold);
      color: var(--text-secondary);
      background-color: var(--surface-variant);
    }
    
    .parameter-required {
      color: var(--error-color);
      font-weight: var(--font-weight-semibold);
    }
    
    .parameter-optional {
      color: var(--text-tertiary);
      font-style: italic;
    }
    
    .response-example {
      margin-top: var(--spacing-md);
    }
    
    .tab-container {
      margin-bottom: var(--spacing-md);
    }
    
    .tab-buttons {
      display: flex;
      border-bottom: 1px solid var(--border-color);
      margin-bottom: var(--spacing-md);
    }
    
    .tab-button {
      padding: var(--spacing-sm) var(--spacing-md);
      background: none;
      border: none;
      border-bottom: 2px solid transparent;
      cursor: pointer;
      color: var(--text-secondary);
      font-weight: var(--font-weight-medium);
    }
    
    .tab-button.active {
      color: var(--primary-color);
      border-bottom-color: var(--primary-color);
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    .api-key-section {
      margin-top: var(--spacing-xxl);
      padding: var(--spacing-lg);
      background-color: var(--surface-color);
      border-radius: var(--border-radius-lg);
      border: 1px solid var(--border-color);
    }
    
    .api-key-manager {
      margin-top: var(--spacing-lg);
    }
    
    footer {
      margin-top: var(--spacing-xxl);
      padding-top: var(--spacing-lg);
      border-top: 1px solid var(--border-color);
      text-align: center;
      color: var(--text-tertiary);
      font-size: var(--font-size-sm);
    }
    
    footer a {
      color: var(--primary-color);
      text-decoration: none;
    }
    
    footer a:hover {
      text-decoration: underline;
    }
    
    @media (max-width: 768px) {
      .header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .nav-links {
        margin-top: var(--spacing-md);
        flex-wrap: wrap;
      }
      
      .endpoint-header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .http-method {
        margin-bottom: var(--spacing-xs);
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="logo">
      <img src="/icons/logo.light.svg" alt="Profullstack, Inc. Logo" class="logo-light">
      <img src="/icons/logo.dark.svg" alt="Profullstack, Inc. Logo" class="logo-dark" style="display: none;">
      <h1>Document Generation API</h1>
    </div>
    
    <div class="nav-links">
      <a href="/" class="nav-link">Home</a>
      <a href="/api-docs.html" class="nav-link">API Docs</a>
      <a href="/api-keys.html" class="nav-link">API Keys</a>
      <a href="/subscription.html" class="nav-link primary">Subscribe</a>
    </div>
  </div>
  
  <h1>API Documentation</h1>
  
  <div class="api-section">
    <h2>Authentication</h2>
    <p>All API endpoints require authentication using an API key. You can create and manage your API keys in the <a href="/api-keys.html">API Keys</a> section.</p>
    <p>Include your API key in the request headers using one of the following methods:</p>
    
    <div class="code-block">
      <pre>Authorization: Bearer pfs_your_api_key_here</pre>
    </div>
    
    <p>Or for backward compatibility:</p>
    
    <div class="code-block">
      <pre>X-API-Key: your_email@example.com</pre>
    </div>
  </div>
  
  <div class="api-section">
    <h2>Document Generation Endpoints</h2>
    
    <div class="endpoint">
      <div class="endpoint-header">
        <span class="http-method method-post">POST</span>
        <span class="endpoint-path">/api/1/html-to-pdf</span>
      </div>
      
      <div class="endpoint-description">
        <p>Converts HTML content to a PDF document.</p>
      </div>
      
      <div class="section-title">Request Parameters</div>
      <table class="parameter-table">
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>html <span class="parameter-required">required</span></td>
            <td>string</td>
            <td>The HTML content to convert to PDF</td>
          </tr>
          <tr>
            <td>options <span class="parameter-optional">optional</span></td>
            <td>object</td>
            <td>PDF generation options (format, margins, etc.)</td>
          </tr>
          <tr>
            <td>filename <span class="parameter-optional">optional</span></td>
            <td>string</td>
            <td>Output filename (default: "document.pdf")</td>
          </tr>
          <tr>
            <td>store <span class="parameter-optional">optional</span></td>
            <td>boolean</td>
            <td>Whether to store the document in Supabase (default: false)</td>
          </tr>
        </tbody>
      </table>
      
      <div class="section-title">Example Request</div>
      <div class="code-block">
        <pre>{
  "html": "&lt;html&gt;&lt;body&gt;&lt;h1&gt;Hello, World!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;",
  "options": {
    "format": "A4",
    "printBackground": true,
    "margin": {
      "top": "1cm",
      "right": "1cm",
      "bottom": "1cm",
      "left": "1cm"
    }
  },
  "filename": "document.pdf",
  "store": false
}</pre>
      </div>
      
      <div class="section-title">Response</div>
      <p>Returns the raw PDF file with the following headers:</p>
      <ul>
        <li><code>Content-Type: application/pdf</code></li>
        <li><code>Content-Disposition: attachment; filename="document.pdf"</code></li>
        <li><code>X-Storage-Path: documents/...</code> (if stored in Supabase)</li>
      </ul>
    </div>
    
    <div class="endpoint">
      <div class="endpoint-header">
        <span class="http-method method-post">POST</span>
        <span class="endpoint-path">/api/1/html-to-doc</span>
      </div>
      
      <div class="endpoint-description">
        <p>Converts HTML content to a Microsoft Word document.</p>
      </div>
      
      <div class="section-title">Request Parameters</div>
      <table class="parameter-table">
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>html <span class="parameter-required">required</span></td>
            <td>string</td>
            <td>The HTML content to convert to Word</td>
          </tr>
          <tr>
            <td>filename <span class="parameter-optional">optional</span></td>
            <td>string</td>
            <td>Output filename (default: "document.doc")</td>
          </tr>
          <tr>
            <td>store <span class="parameter-optional">optional</span></td>
            <td>boolean</td>
            <td>Whether to store the document in Supabase (default: false)</td>
          </tr>
        </tbody>
      </table>
      
      <div class="section-title">Example Request</div>
      <div class="code-block">
        <pre>{
  "html": "&lt;html&gt;&lt;body&gt;&lt;h1&gt;Hello, World!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;",
  "filename": "document.doc",
  "store": false
}</pre>
      </div>
      
      <div class="section-title">Response</div>
      <p>Returns the raw Word document file with the following headers:</p>
      <ul>
        <li><code>Content-Type: application/msword</code></li>
        <li><code>Content-Disposition: attachment; filename="document.doc"</code></li>
        <li><code>X-Storage-Path: documents/...</code> (if stored in Supabase)</li>
      </ul>
    </div>
    
    <!-- More endpoints would be listed here -->
  </div>
  
  <div class="api-section">
    <h2>API Key Management</h2>
    
    <div class="endpoint">
      <div class="endpoint-header">
        <span class="http-method method-get">GET</span>
        <span class="endpoint-path">/api/1/api-keys</span>
      </div>
      
      <div class="endpoint-description">
        <p>Lists all API keys for the authenticated user.</p>
      </div>
      
      <div class="section-title">Response</div>
      <div class="code-block">
        <pre>{
  "api_keys": [
    {
      "id": "uuid",
      "name": "Production",
      "is_active": true,
      "last_used_at": "2023-04-18T12:34:56.789Z",
      "created_at": "2023-04-18T12:34:56.789Z"
    },
    {
      "id": "uuid",
      "name": "Development",
      "is_active": true,
      "last_used_at": null,
      "created_at": "2023-04-18T12:34:56.789Z"
    }
  ]
}</pre>
      </div>
    </div>
    
    <div class="endpoint">
      <div class="endpoint-header">
        <span class="http-method method-post">POST</span>
        <span class="endpoint-path">/api/1/api-keys</span>
      </div>
      
      <div class="endpoint-description">
        <p>Creates a new API key for the authenticated user.</p>
      </div>
      
      <div class="section-title">Request Parameters</div>
      <table class="parameter-table">
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>name <span class="parameter-required">required</span></td>
            <td>string</td>
            <td>A name for the API key</td>
          </tr>
        </tbody>
      </table>
      
      <div class="section-title">Example Request</div>
      <div class="code-block">
        <pre>{
  "name": "Production"
}</pre>
      </div>
      
      <div class="section-title">Response</div>
      <div class="code-block">
        <pre>{
  "id": "uuid",
  "name": "Production",
  "key": "pfs_a1b2c3d4e5f6...",
  "created_at": "2023-04-18T12:34:56.789Z"
}</pre>
      </div>
      
      <div class="section-title">Important Note</div>
      <p>The API key is only returned once when it's created. Make sure to store it securely as you won't be able to retrieve it again.</p>
    </div>
    
    <div class="endpoint">
      <div class="endpoint-header">
        <span class="http-method method-put">PUT</span>
        <span class="endpoint-path">/api/1/api-keys/:id</span>
      </div>
      
      <div class="endpoint-description">
        <p>Updates an existing API key.</p>
      </div>
      
      <div class="section-title">Request Parameters</div>
      <table class="parameter-table">
        <thead>
          <tr>
            <th>Parameter</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>name <span class="parameter-optional">optional</span></td>
            <td>string</td>
            <td>A new name for the API key</td>
          </tr>
          <tr>
            <td>is_active <span class="parameter-optional">optional</span></td>
            <td>boolean</td>
            <td>Whether the API key is active</td>
          </tr>
        </tbody>
      </table>
      
      <div class="section-title">Example Request</div>
      <div class="code-block">
        <pre>{
  "name": "Production Updated",
  "is_active": false
}</pre>
      </div>
      
      <div class="section-title">Response</div>
      <div class="code-block">
        <pre>{
  "id": "uuid",
  "name": "Production Updated",
  "is_active": false,
  "last_used_at": "2023-04-18T12:34:56.789Z",
  "created_at": "2023-04-18T12:34:56.789Z"
}</pre>
      </div>
    </div>
    
    <div class="endpoint">
      <div class="endpoint-header">
        <span class="http-method method-delete">DELETE</span>
        <span class="endpoint-path">/api/1/api-keys/:id</span>
      </div>
      
      <div class="endpoint-description">
        <p>Deletes an API key.</p>
      </div>
      
      <div class="section-title">Response</div>
      <div class="code-block">
        <pre>{
  "success": true
}</pre>
      </div>
    </div>
  </div>
  
  <div class="api-key-section">
    <h2>Manage Your API Keys</h2>
    <p>Create and manage your API keys directly from this page.</p>
    
    <div class="api-key-manager">
      <api-key-manager></api-key-manager>
    </div>
  </div>
  
  <footer>
    <p>&copy; 2025 <a href="https://profullstack.com" target="_blank">Profullstack, Inc.</a>. All rights reserved.</p>
  </footer>

  <script>
    // Switch logo based on theme
    document.addEventListener('themechange', (event) => {
      const logoLight = document.querySelector('.logo-light');
      const logoDark = document.querySelector('.logo-dark');
      
      if (event.detail.theme === 'dark') {
        logoLight.style.display = 'none';
        logoDark.style.display = 'block';
      } else {
        logoLight.style.display = 'block';
        logoDark.style.display = 'none';
      }
    });
    
    // Set initial logo based on current theme
    document.addEventListener('DOMContentLoaded', () => {
      const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
      const logoLight = document.querySelector('.logo-light');
      const logoDark = document.querySelector('.logo-dark');
      
      if (currentTheme === 'dark') {
        logoLight.style.display = 'none';
        logoDark.style.display = 'block';
      } else {
        logoLight.style.display = 'block';
        logoDark.style.display = 'none';
      }
    });
  </script>
</body>
</html>